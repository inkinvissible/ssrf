<!DOCTYPE html>
<html>
<head>
    <title>SSRF Test con iframe</title>
</head>
<body>
    <h1>SSRF Test</h1>
    <div id="iframeContainer"></div>
    <button id="loadIframe">Cargar iframe</button>

    <script>
        const webhookUrl = 'https://webhook.site/7cdc61db-d2f3-4e50-aab4-9744f57a2a32';
        
        document.getElementById('loadIframe').addEventListener('click', function() {
            const iframe = document.createElement('iframe');
            iframe.style.display = 'none';  // Ocultar el iframe
            iframe.src = webhookUrl + '?source=iframe&time=' + Date.now();
            
            iframe.onload = function() {
                console.log('iframe cargado exitosamente');
                // Intenta acceder al contenido del iframe (esto fallará si no es del mismo origen)
                try {
                    console.log(iframe.contentDocument);
                } catch (e) {
                    console.log('No se puede acceder al contenido del iframe debido a la política del mismo origen');
                }
            };
            
            iframe.onerror = function() {
                console.log('Error al cargar el iframe');
            };
            
            document.getElementById('iframeContainer').appendChild(iframe);
        });
        
        // Intento adicional con Image para comparación
        const img = new Image();
        img.onload = () => console.log('Imagen cargada exitosamente');
        img.onerror = () => console.log('Error al cargar la imagen (esto es normal)');
        img.src = webhookUrl + '?source=img_tag&time=' + Date.now();
    </script>
</body>
</html>
